# Type signatures for SecretsCache
class SecretsCache
  include Singleton

  DEFAULT_VERSION_STAGE: String

  @cache: Hash[String, Hash[String, untyped]]
  @mutex: Mutex

  def initialize: () -> void

  def get: (String secret_id, ?String version_stage) -> Hash[String, untyped]?

  def set: (String secret_id, String version_stage, Hash[String, untyped] secret_data) -> Hash[String, untyped]

  def get_many: (Array[String] secret_ids, ?String version_stage) -> { cached: Array[Hash[String, untyped]], missing: Array[String] }

  def set_many: (Array[Hash[String, untyped]] secrets, ?String version_stage) -> void

  def clear: () -> void

  def size: () -> Integer

  private

  def cache_key: (String secret_id, String version_stage) -> String
end
